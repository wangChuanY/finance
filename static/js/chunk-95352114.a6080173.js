(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95352114"],{4685:function(e,t,r){},9755:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"20px"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v(" 新增出售记录 ")]),r("el-button",{attrs:{type:"success",icon:"el-icon-refresh"},on:{click:e.getList}},[e._v(" 刷新 ")])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{label:"ID",prop:"id",align:"center",width:"80"}}),r("el-table-column",{attrs:{label:"货币类型",prop:"currency",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.currency))])]}}])}),r("el-table-column",{attrs:{label:"出售数量",prop:"amount",align:"center"}}),r("el-table-column",{attrs:{label:"价格($)",prop:"price",align:"center"}}),r("el-table-column",{attrs:{label:"usdt金额($)",prop:"fiat_money",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.fiat_money)+" ")]}}])}),r("el-table-column",{attrs:{label:"备注",prop:"remark",align:"center","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{label:"创建时间",prop:"created_at",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.parseTime(t.row.created_at))+" ")]}}])}),r("el-table-column",{attrs:{label:"更新时间",prop:"updated_at",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.parseTime(t.row.updated_at))+" ")]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v(" 修改 ")]),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v(" 删除 ")])]}}])})],1),r("div",{staticClass:"pagination-container",staticStyle:{"margin-top":"20px","text-align":"right"}},[r("el-pagination",{attrs:{"current-page":e.queryParams.pageNum,"page-sizes":[10,20,30,50],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:current-page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},"size-change":e.getList,"current-change":e.getList}})],1),r("el-dialog",{attrs:{title:e.title,visible:e.open,width:"520px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"货币类型",prop:"currency"}},[r("el-input",{attrs:{placeholder:"如：BTC"},model:{value:e.form.currency,callback:function(t){e.$set(e.form,"currency",t)},expression:"form.currency"}})],1),r("el-form-item",{attrs:{label:"出售数量",prop:"amount"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{precision:4,min:0},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}})],1),r("el-form-item",{attrs:{label:"价格",prop:"price"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{precision:4,min:0},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),r("el-form-item",{attrs:{label:"usdt金额",prop:"fiat_money"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{precision:2,min:0},model:{value:e.form.fiat_money,callback:function(t){e.$set(e.form,"fiat_money",t)},expression:"form.fiat_money"}})],1),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea",rows:3,placeholder:"备注信息"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),r("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},n=[],i=r("5530"),o=r("c14f"),s=r("1da1"),c=(r("ac1f"),r("5319"),r("a8f6")),l={name:"FinSell",data:function(){return{loading:!0,total:0,list:[],open:!1,title:"",queryParams:{pageNum:1,pageSize:10},form:{},rules:{currency:[{required:!0,message:"请输入货币类型",trigger:"blur"}],amount:[{required:!0,message:"请输入出售数量",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}],fiat_money:[{required:!0,message:"请输入法币金额",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;return Object(s["a"])(Object(o["a"])().m((function t(){var r,a,n,i,s,l,u;return Object(o["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return e.loading=!0,t.p=1,r=(e.queryParams.pageNum-1)*e.queryParams.pageSize,a=r+e.queryParams.pageSize-1,t.n=2,c["a"].from("fin_sell").select("*",{count:"exact"}).order("id",{ascending:!1}).range(r,a);case 2:if(n=t.v,i=n.data,s=n.count,l=n.error,!l){t.n=3;break}throw l;case 3:e.list=i,e.total=s||0,t.n=5;break;case 4:t.p=4,u=t.v,e.$message.error(u.message);case 5:return t.p=5,e.loading=!1,t.f(5);case 6:return t.a(2)}}),t,null,[[1,4,5,6]])})))()},reset:function(){var e=this;this.form={id:void 0,currency:"BTC",amount:0,price:0,fiat_money:0,remark:""},this.$nextTick((function(){e.$refs.form&&e.$refs.form.clearValidate()}))},handleAdd:function(){this.reset(),this.title="新增出售记录",this.open=!0},handleUpdate:function(e){this.reset(),this.form=Object(i["a"])({},e),this.title="修改出售记录",this.open=!0},cancel:function(){this.open=!1,this.reset()},submitForm:function(){var e=this;this.$refs.form.validate(function(){var t=Object(s["a"])(Object(o["a"])().m((function t(r){var a,n,i,s,l;return Object(o["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(r){t.n=1;break}return t.a(2);case 1:if(t.p=1,!e.form.id){t.n=4;break}return t.n=2,c["a"].from("fin_sell").update({currency:e.form.currency,amount:e.form.amount,price:e.form.price,fiat_money:e.form.fiat_money,remark:e.form.remark}).eq("id",e.form.id);case 2:if(a=t.v,n=a.error,!n){t.n=3;break}throw n;case 3:e.$message.success("修改成功"),t.n=7;break;case 4:return t.n=5,c["a"].from("fin_sell").insert({currency:e.form.currency,amount:e.form.amount,price:e.form.price,fiat_money:e.form.fiat_money,remark:e.form.remark});case 5:if(i=t.v,s=i.error,!s){t.n=6;break}throw s;case 6:e.$message.success("新增成功");case 7:e.open=!1,e.getList(),t.n=9;break;case 8:t.p=8,l=t.v,e.$message.error(l.message);case 9:return t.a(2)}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}())},handleDelete:function(e){var t=this;return Object(s["a"])(Object(o["a"])().m((function r(){return Object(o["a"])().w((function(r){while(1)switch(r.n){case 0:t.$confirm("确认删除该出售记录？","警告",{type:"warning"}).then(Object(s["a"])(Object(o["a"])().m((function r(){var a,n;return Object(o["a"])().w((function(r){while(1)switch(r.n){case 0:return r.n=1,c["a"].from("fin_sell").delete().eq("id",e.id);case 1:if(a=r.v,n=a.error,!n){r.n=2;break}throw n;case 2:t.$message.success("删除成功"),t.getList();case 3:return r.a(2)}}),r)}))));case 1:return r.a(2)}}),r)})))()},parseTime:function(e){return e?e.replace("T"," ").substring(0,19):""}}},u=l,m=(r("b688"),r("2877")),f=Object(m["a"])(u,a,n,!1,null,"399a9f12",null);t["default"]=f.exports},b688:function(e,t,r){"use strict";r("4685")}}]);